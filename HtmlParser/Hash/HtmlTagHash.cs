using System;

namespace HtmlParser.Hash
{
    public class HtmlTagHash
    {

        static readonly byte[] associationValues2 = new byte[] {
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235,  30,
       90, 110,  45,  15,   0,  10,   0, 235, 235, 235,
      235, 235, 235, 235, 235, 100,   0,  50,  30,  60,
       10, 235,  35,  65, 235, 100,  40,  35, 110,  85,
       50,  80, 105,   5,  20,  75, 115, 115, 105, 235,
      235, 235, 235, 235, 235, 235, 235,  75,  65,  30,
       50,   5,  45,  20, 100,  95,  25,   5,  20,  55,
        0,  40,  10,  30,   5,  35,   0,  20,  25,  65,
       10,  60, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235, 235, 235,
      235, 235, 235, 235, 235, 235, 235, 235
    };


        static readonly byte[] associationValues = new byte[] {
          /*   0 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /*  10 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /*  20 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /*  30 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /*  40 */   201, 201, 201, 201, 201,    201, 201, 201, 201,  66,
          /*  50 */    59,  58,  24,  20,  15,    201, 201, 201, 201, 201,
          /*  60 */   201, 201, 201, 201, 201,    103,  61,  70,  68,   6,
          /*  70 */    44,  18,  15,  69,  47,     62,  38,  67,  16,  40,
          /*  80 */    22,  97,  42,   9,   5,     11,  77,  25,  90,   7,
          /*  90 */    24,  12,  10,  17,  13,    201, 201, 103,  61,  70,
          /* 100 */    68,   6,  44,  18,  15,     69,  47,  62,  38,  67,
          /* 110 */    16,  40,  22,  97,  42,      9,   5,  11,  77,  25,
          /* 120 */    90,   7,  24,  12,  10,     17,  13, 201, 201, 201,
          /* 130 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 140 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 150 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 160 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 170 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 180 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 190 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 200 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 210 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 220 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 230 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 240 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 250 */   201, 201, 201, 201, 201,    201, 201, 201, 201, 201,
          /* 260 */   201, 201
            };


        public static HtmlTag GetTag(char[] content, int offset, int length)
        {
            byte hash = 0;
            int index;
            if (length > 2)
            {
                index = (int)content[offset + 2] & 0xFF;
                hash += associationValues[index + 1];
            }

            index = (int)content[offset + 0] & 0xFF;
            hash += associationValues[index + 6];
            index = (int)content[offset + length - 1] & 0xFF;
            hash += associationValues[index];
            return (HtmlTag)hash;
        }

        public static HtmlTag2 Hash(string str, int len)
        {
            int hval = len;
            if (hval != 1)
            {
                hval += associationValues2[(char)str[1] + 2];
            }
            hval += associationValues2[(char)str[0]];
            return (HtmlTag2)(hval + associationValues2[(char)str[len - 1]] + 1);
        }
    }


}

